#!/usr/bin/env bash

source ~/.bash-my-aws/load.sh

my_query='
  Reservations[].Instances[][
      InstanceId,
      KeyName,
      PrivateIpAddress,
      PublicIpAddress,
      InstanceType,
      State.Name,
      [Tags[?Key==`Name`].Value][0][0]
  ]
 '
instances ${inputs} --query ${my_query}

#while read id key ip extip type state name; do name=${name/ - /-}; name=${name/ /-}; echo "alias ${name/ /-}='slogin ubuntu@$ip -i ~/.ssh/$key.pem'"; done < <( list-aws ) | sort > ~/aliases.gen
